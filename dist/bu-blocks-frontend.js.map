{"version":3,"file":"bu-blocks-frontend.js","mappings":"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","sources":["webpack://bu-blocks/./src/blocks-frontend-polyfills.js","webpack://bu-blocks/./src/blocks-frontend-tools.js","webpack://bu-blocks/./src/blocks/clicktotweet/frontend.js","webpack://bu-blocks/./src/blocks/collapsible-control/frontend.js","webpack://bu-blocks/./src/blocks/collapsible/frontend.js","webpack://bu-blocks/./src/blocks/drawer/frontend.js","webpack://bu-blocks/./src/blocks/modal/frontend.js","webpack://bu-blocks/./src/blocks/photoessay/frontend.js","webpack://bu-blocks/webpack/bootstrap","webpack://bu-blocks/webpack/runtime/compat get default export","webpack://bu-blocks/webpack/runtime/define property getters","webpack://bu-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://bu-blocks/webpack/runtime/make namespace object","webpack://bu-blocks/./src/blocks-frontend.js"],"sourcesContent":["/**\n * Polyfills\n *\n * This was a last-minute inclusion during the original development of BU Blocks\n * to fix some browser compatibility isues. These polyfills may no longer be needed.\n * Additionally, compiling the JS with modern build tools should also help handle this if needed.\n *\n * Todo: test if these polyfills are needed for current browser support.\n */\n\n/*\nCustom Event Polyfill\nhttps://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n*/\n( function () {\n\tif ( typeof window.CustomEvent === 'function' ) {\n\t\treturn false;\n\t}\n\n\tfunction CustomEvent( event, params ) {\n\t\tparams = params || { bubbles: false, cancelable: false, detail: null };\n\t\tconst evt = document.createEvent( 'CustomEvent' );\n\t\tevt.initCustomEvent(\n\t\t\tevent,\n\t\t\tparams.bubbles,\n\t\t\tparams.cancelable,\n\t\t\tparams.detail\n\t\t);\n\t\treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n} )();\n\n/*\n  .matches() polyfill:\n  https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n   */\nif ( ! Element.prototype.matches ) {\n\tElement.prototype.matches =\n\t\tElement.prototype.msMatchesSelector ||\n\t\tElement.prototype.webkitMatchesSelector;\n}\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\nif ( ! Array.prototype.findIndex ) {\n\tObject.defineProperty( Array.prototype, 'findIndex', {\n\t\tvalue( predicate ) {\n\t\t\t// 1. Let O be ? ToObject(this value).\n\t\t\tif ( this == null ) {\n\t\t\t\tthrow new TypeError( '\"this\" is null or not defined' );\n\t\t\t}\n\n\t\t\tconst o = Object( this );\n\n\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\t\t\tconst len = o.length >>> 0;\n\n\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\t\t\tif ( typeof predicate !== 'function' ) {\n\t\t\t\tthrow new TypeError( 'predicate must be a function' );\n\t\t\t}\n\n\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\t\t\tconst thisArg = arguments[ 1 ];\n\n\t\t\t// 5. Let k be 0.\n\t\t\tlet k = 0;\n\n\t\t\t// 6. Repeat, while k < len\n\t\t\twhile ( k < len ) {\n\t\t\t\t// a. Let Pk be ! ToString(k).\n\t\t\t\t// b. Let kValue be ? Get(O, Pk).\n\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\t\t\t\t// d. If testResult is true, return k.\n\t\t\t\tconst kValue = o[ k ];\n\t\t\t\tif ( predicate.call( thisArg, kValue, k, o ) ) {\n\t\t\t\t\treturn k;\n\t\t\t\t}\n\t\t\t\t// e. Increase k by 1.\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\t// 7. Return -1.\n\t\t\treturn -1;\n\t\t},\n\t\tconfigurable: true,\n\t\twritable: true,\n\t} );\n}\n\n// Matches polyfill.\nif ( ! Element.prototype.matches ) {\n\tElement.prototype.matches =\n\t\tElement.prototype.msMatchesSelector ||\n\t\tElement.prototype.webkitMatchesSelector;\n}\n// element.closest() polyfill.\nif ( ! Element.prototype.closest ) {\n\tElement.prototype.closest = function ( s ) {\n\t\tlet el = this;\n\n\t\tdo {\n\t\t\tif ( Element.prototype.matches.call( el, s ) ) {\n\t\t\t\treturn el;\n\t\t\t}\n\t\t\tel = el.parentElement || el.parentNode;\n\t\t} while ( el !== null && el.nodeType === 1 );\n\t\treturn null;\n\t};\n}\n\n// Foreach NodeList Polyfill for IE.\nif ( 'NodeList' in window && ! NodeList.prototype.forEach ) {\n\tconsole.info( 'polyfill for IE11' );\n\tNodeList.prototype.forEach = function ( callback, thisArg ) {\n\t\tthisArg = thisArg || window;\n\t\tfor ( let i = 0; i < this.length; i++ ) {\n\t\t\tcallback.call( thisArg, this[ i ], i, this );\n\t\t}\n\t};\n}\n\n// Foreach Polyfill\n// Production steps of ECMA-262, Edition 5, 15.4.4.18\n// Reference: http://es5.github.io/#x15.4.4.18\nif ( ! Array.prototype.forEach ) {\n\tArray.prototype.forEach = function ( callback /*, thisArg*/ ) {\n\t\tlet T, k;\n\n\t\tif ( this == null ) {\n\t\t\tthrow new TypeError( 'this is null or not defined' );\n\t\t}\n\n\t\t// 1. Let O be the result of calling toObject() passing the\n\t\t// |this| value as the argument.\n\t\tconst O = Object( this );\n\n\t\t// 2. Let lenValue be the result of calling the Get() internal\n\t\t// method of O with the argument \"length\".\n\t\t// 3. Let len be toUint32(lenValue).\n\t\tconst len = O.length >>> 0;\n\n\t\t// 4. If isCallable(callback) is false, throw a TypeError exception.\n\t\t// See: http://es5.github.com/#x9.11\n\t\tif ( typeof callback !== 'function' ) {\n\t\t\tthrow new TypeError( callback + ' is not a function' );\n\t\t}\n\n\t\t// 5. If thisArg was supplied, let T be thisArg; else let\n\t\t// T be undefined.\n\t\tif ( arguments.length > 1 ) {\n\t\t\tT = arguments[ 1 ];\n\t\t}\n\n\t\t// 6. Let k be 0.\n\t\tk = 0;\n\n\t\t// 7. Repeat while k < len.\n\t\twhile ( k < len ) {\n\t\t\tvar kValue;\n\n\t\t\t// a. Let Pk be ToString(k).\n\t\t\t//    This is implicit for LHS operands of the in operator.\n\t\t\t// b. Let kPresent be the result of calling the HasProperty\n\t\t\t//    internal method of O with argument Pk.\n\t\t\t//    This step can be combined with c.\n\t\t\t// c. If kPresent is true, then\n\t\t\tif ( k in O ) {\n\t\t\t\t// i. Let kValue be the result of calling the Get internal\n\t\t\t\t// method of O with argument Pk.\n\t\t\t\tkValue = O[ k ];\n\n\t\t\t\t// ii. Call the Call internal method of callback with T as\n\t\t\t\t// the this value and argument list containing kValue, k, and O.\n\t\t\t\tcallback.call( T, kValue, k, O );\n\t\t\t}\n\t\t\t// d. Increase k by 1.\n\t\t\tk++;\n\t\t}\n\t\t// 8. return undefined.\n\t};\n}\n\n//Classlist polyfill\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.1.20170427\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif ( 'document' in self ) {\n\t// Full polyfill for browsers with no classList support\n\t// Including IE < Edge missing SVGElement.classList\n\tif (\n\t\t! ( 'classList' in document.createElement( '_' ) ) ||\n\t\t( document.createElementNS &&\n\t\t\t! (\n\t\t\t\t'classList' in\n\t\t\t\tdocument.createElementNS( 'http://www.w3.org/2000/svg', 'g' )\n\t\t\t) )\n\t) {\n\t\t( function ( view ) {\n\t\t\t'use strict';\n\n\t\t\tif ( ! ( 'Element' in view ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst classListProp = 'classList',\n\t\t\t\tprotoProp = 'prototype',\n\t\t\t\telemCtrProto = view.Element[ protoProp ],\n\t\t\t\tobjCtr = Object,\n\t\t\t\tstrTrim =\n\t\t\t\t\tString[ protoProp ].trim ||\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\treturn this.replace( /^\\s+|\\s+$/g, '' );\n\t\t\t\t\t},\n\t\t\t\tarrIndexOf =\n\t\t\t\t\tArray[ protoProp ].indexOf ||\n\t\t\t\t\tfunction ( item ) {\n\t\t\t\t\t\tlet i = 0,\n\t\t\t\t\t\t\tlen = this.length;\n\t\t\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\t\t\tif ( i in this && this[ i ] === item ) {\n\t\t\t\t\t\t\t\treturn i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t},\n\t\t\t\t// Vendors: please allow content code to instantiate DOMExceptions\n\t\t\t\tDOMEx = function ( type, message ) {\n\t\t\t\t\tthis.name = type;\n\t\t\t\t\tthis.code = DOMException[ type ];\n\t\t\t\t\tthis.message = message;\n\t\t\t\t},\n\t\t\t\tcheckTokenAndGetIndex = function ( classList, token ) {\n\t\t\t\t\tif ( token === '' ) {\n\t\t\t\t\t\tthrow new DOMEx(\n\t\t\t\t\t\t\t'SYNTAX_ERR',\n\t\t\t\t\t\t\t'An invalid or illegal string was specified'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif ( /\\s/.test( token ) ) {\n\t\t\t\t\t\tthrow new DOMEx(\n\t\t\t\t\t\t\t'INVALID_CHARACTER_ERR',\n\t\t\t\t\t\t\t'String contains an invalid character'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn arrIndexOf.call( classList, token );\n\t\t\t\t},\n\t\t\t\tClassList = function ( elem ) {\n\t\t\t\t\tlet trimmedClasses = strTrim.call(\n\t\t\t\t\t\t\telem.getAttribute( 'class' ) || ''\n\t\t\t\t\t\t),\n\t\t\t\t\t\tclasses = trimmedClasses\n\t\t\t\t\t\t\t? trimmedClasses.split( /\\s+/ )\n\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\ti = 0,\n\t\t\t\t\t\tlen = classes.length;\n\t\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\t\tthis.push( classes[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\tthis._updateClassName = function () {\n\t\t\t\t\t\telem.setAttribute( 'class', this.toString() );\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tclassListProto = ( ClassList[ protoProp ] = [] ),\n\t\t\t\tclassListGetter = function () {\n\t\t\t\t\treturn new ClassList( this );\n\t\t\t\t};\n\t\t\t// Most DOMException implementations don't allow calling DOMException's toString()\n\t\t\t// on non-DOMExceptions. Error's toString() is sufficient here.\n\t\t\tDOMEx[ protoProp ] = Error[ protoProp ];\n\t\t\tclassListProto.item = function ( i ) {\n\t\t\t\treturn this[ i ] || null;\n\t\t\t};\n\t\t\tclassListProto.contains = function ( token ) {\n\t\t\t\ttoken += '';\n\t\t\t\treturn checkTokenAndGetIndex( this, token ) !== -1;\n\t\t\t};\n\t\t\tclassListProto.add = function () {\n\t\t\t\tlet tokens = arguments,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tl = tokens.length,\n\t\t\t\t\ttoken,\n\t\t\t\t\tupdated = false;\n\t\t\t\tdo {\n\t\t\t\t\ttoken = tokens[ i ] + '';\n\t\t\t\t\tif ( checkTokenAndGetIndex( this, token ) === -1 ) {\n\t\t\t\t\t\tthis.push( token );\n\t\t\t\t\t\tupdated = true;\n\t\t\t\t\t}\n\t\t\t\t} while ( ++i < l );\n\n\t\t\t\tif ( updated ) {\n\t\t\t\t\tthis._updateClassName();\n\t\t\t\t}\n\t\t\t};\n\t\t\tclassListProto.remove = function () {\n\t\t\t\tlet tokens = arguments,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tl = tokens.length,\n\t\t\t\t\ttoken,\n\t\t\t\t\tupdated = false,\n\t\t\t\t\tindex;\n\t\t\t\tdo {\n\t\t\t\t\ttoken = tokens[ i ] + '';\n\t\t\t\t\tindex = checkTokenAndGetIndex( this, token );\n\t\t\t\t\twhile ( index !== -1 ) {\n\t\t\t\t\t\tthis.splice( index, 1 );\n\t\t\t\t\t\tupdated = true;\n\t\t\t\t\t\tindex = checkTokenAndGetIndex( this, token );\n\t\t\t\t\t}\n\t\t\t\t} while ( ++i < l );\n\n\t\t\t\tif ( updated ) {\n\t\t\t\t\tthis._updateClassName();\n\t\t\t\t}\n\t\t\t};\n\t\t\tclassListProto.toggle = function ( token, force ) {\n\t\t\t\ttoken += '';\n\n\t\t\t\tconst result = this.contains( token ),\n\t\t\t\t\tmethod = result\n\t\t\t\t\t\t? force !== true && 'remove'\n\t\t\t\t\t\t: force !== false && 'add';\n\t\t\t\tif ( method ) {\n\t\t\t\t\tthis[ method ]( token );\n\t\t\t\t}\n\n\t\t\t\tif ( force === true || force === false ) {\n\t\t\t\t\treturn force;\n\t\t\t\t}\n\t\t\t\treturn ! result;\n\t\t\t};\n\t\t\tclassListProto.toString = function () {\n\t\t\t\treturn this.join( ' ' );\n\t\t\t};\n\n\t\t\tif ( objCtr.defineProperty ) {\n\t\t\t\tconst classListPropDesc = {\n\t\t\t\t\tget: classListGetter,\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t};\n\t\t\t\ttry {\n\t\t\t\t\tobjCtr.defineProperty(\n\t\t\t\t\t\telemCtrProto,\n\t\t\t\t\t\tclassListProp,\n\t\t\t\t\t\tclassListPropDesc\n\t\t\t\t\t);\n\t\t\t\t} catch ( ex ) {\n\t\t\t\t\t// IE 8 doesn't support enumerable:true\n\t\t\t\t\t// adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n\t\t\t\t\t// modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n\t\t\t\t\tif (\n\t\t\t\t\t\tex.number === undefined ||\n\t\t\t\t\t\tex.number === -0x7ff5ec54\n\t\t\t\t\t) {\n\t\t\t\t\t\tclassListPropDesc.enumerable = false;\n\t\t\t\t\t\tobjCtr.defineProperty(\n\t\t\t\t\t\t\telemCtrProto,\n\t\t\t\t\t\t\tclassListProp,\n\t\t\t\t\t\t\tclassListPropDesc\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if ( objCtr[ protoProp ].__defineGetter__ ) {\n\t\t\t\telemCtrProto.__defineGetter__( classListProp, classListGetter );\n\t\t\t}\n\t\t} )( self );\n\t}\n\n\t// There is full or partial native classList support, so just check if we need\n\t// to normalize the add/remove and toggle APIs.\n\n\t( function () {\n\t\t'use strict';\n\n\t\tlet testElement = document.createElement( '_' );\n\n\t\ttestElement.classList.add( 'c1', 'c2' );\n\n\t\t// Polyfill for IE 10/11 and Firefox <26, where classList.add and\n\t\t// classList.remove exist but support only one argument at a time.\n\t\tif ( ! testElement.classList.contains( 'c2' ) ) {\n\t\t\tconst createMethod = function ( method ) {\n\t\t\t\tconst original = DOMTokenList.prototype[ method ];\n\n\t\t\t\tDOMTokenList.prototype[ method ] = function ( token ) {\n\t\t\t\t\tlet i,\n\t\t\t\t\t\tlen = arguments.length;\n\n\t\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\t\ttoken = arguments[ i ];\n\t\t\t\t\t\toriginal.call( this, token );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t\tcreateMethod( 'add' );\n\t\t\tcreateMethod( 'remove' );\n\t\t}\n\n\t\ttestElement.classList.toggle( 'c3', false );\n\n\t\t// Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n\t\t// support the second argument.\n\t\tif ( testElement.classList.contains( 'c3' ) ) {\n\t\t\tconst _toggle = DOMTokenList.prototype.toggle;\n\n\t\t\tDOMTokenList.prototype.toggle = function ( token, force ) {\n\t\t\t\tif ( 1 in arguments && ! this.contains( token ) === ! force ) {\n\t\t\t\t\treturn force;\n\t\t\t\t}\n\t\t\t\treturn _toggle.call( this, token );\n\t\t\t};\n\t\t}\n\n\t\ttestElement = null;\n\t} )();\n}\n","// Create a global object to store all BU Blocks related functions and data.\nconst bu_blocks = {};\n\nexport default bu_blocks;\n","/**\n * BLOCK: ClicktoTweet\n *\n * A modification of Paragraph blocks to add a click to tweet feature.\n * If applied to the entire block the whole paragraph is tweetable.\n * If text is highlighted and the click to tweet format is applied, only that\n * highlighted text will recieve a tweetable link.\n */\n\n// Internal dependencies.\nimport bu_blocks from '../../blocks-frontend-tools';\n\nbu_blocks.clicktotweet = ( function () {\n\tconst tweetBlocks = []; //stores all of our found blocks\n\tlet tweetLabel = 'Tweet this';\n\n\tconst findElements = function () {\n\t\t//find all the blocks\n\t\tconst elements = document.querySelectorAll(\n\t\t\t'.wp-block-bu-clicktotweet'\n\t\t);\n\t\t//if found\n\t\tif ( elements.length > 0 ) {\n\t\t\t//for each found block do stuff\n\t\t\telements.forEach( function ( theBlock, item ) {\n\t\t\t\tconst block = {};\n\n\t\t\t\t// Get DOM element.\n\t\t\t\tblock.element = theBlock;\n\n\t\t\t\t// Check if this block has a highlight subsection of text\n\t\t\t\tif ( theBlock.classList.contains( 'has-format-highlight' ) ) {\n\t\t\t\t\tblock.highlight = theBlock.querySelector(\n\t\t\t\t\t\t'.wp-block-bu-clicktotweet-highlight'\n\t\t\t\t\t);\n\n\t\t\t\t\t// Get and store the highlighted text as our text to tweet.\n\t\t\t\t\tblock.tweet_text = block.highlight.innerText;\n\t\t\t\t} else {\n\t\t\t\t\t// Get the entire paragraph's text to tweet.\n\t\t\t\t\tblock.tweet_text = theBlock.innerText;\n\t\t\t\t}\n\n\t\t\t\t//for each one found store as object in the array\n\t\t\t\ttweetBlocks.push( block );\n\t\t\t} );\n\t\t}\n\t};\n\n\t/*\n\tSetup click handlers for these blocks\n\t*/\n\tconst setupHandlers = function () {\n\t\tif ( tweetBlocks.length > 0 ) {\n\t\t\t// Loop through all found Tweet Blocks\n\t\t\ttweetBlocks.forEach( function ( theBlock, item ) {\n\t\t\t\tlet btn;\n\n\t\t\t\t// If has subtext highlighted to tweet use that.\n\t\t\t\tif ( theBlock.highlight ) {\n\t\t\t\t\tbtn = theBlock.highlight;\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise append the tweet button for the whole <p>.\n\t\t\t\t\tbtn = document.createElement( 'button' );\n\t\t\t\t\tbtn.appendChild( document.createTextNode( tweetLabel ) );\n\t\t\t\t\tbtn.classList.add( 'wp-block-bu-clicktotweet-action' );\n\t\t\t\t\tbtn.classList.add( 'js-wp-block-clicktotweet-action' );\n\t\t\t\t\ttheBlock.element.appendChild( btn );\n\n\t\t\t\t\t// Store reference to the btn.\n\t\t\t\t\ttheBlock.btn = btn;\n\t\t\t\t}\n\n\t\t\t\t// If we have a button element, setup click handler\n\t\t\t\t// to open Tweet window.\n\t\t\t\tif ( btn ) {\n\t\t\t\t\tbtn.addEventListener( 'click', function ( e ) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\topenTweet( theBlock.tweet_text );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t};\n\n\t/*\n\tOpens a small window with\n\tthe Twitter Link Sharing Tool open and\n\tpasses the text of the tweet and url\n\tof the post\tto Twitter.\n\t*/\n\tvar openTweet = function ( text ) {\n\t\tconst tweetedLink = window.location.href;\n\n\t\twindow.open(\n\t\t\t'http://twitter.com/intent/tweet?url=' +\n\t\t\t\ttweetedLink +\n\t\t\t\t'&text=' +\n\t\t\t\ttext +\n\t\t\t\t'&',\n\t\t\t'twitterwindow',\n\t\t\t'height=450, width=550, toolbar=0, location=0, menubar=0, directories=0, scrollbars=0'\n\t\t);\n\t};\n\n\t/*\n\tHelper function to set the Button text\n\tto a new value on new and existing blocks.\n\t */\n\tconst setButtonText = function ( str ) {\n\t\ttweetLabel = str;\n\n\t\ttweetBlocks.forEach( function ( theBlock, item ) {\n\t\t\tif ( theBlock.btn ) {\n\t\t\t\ttheBlock.btn.innerText = tweetLabel;\n\t\t\t}\n\t\t} );\n\t};\n\n\tconst tweetInit = function () {\n\t\t//find the elements\n\t\tfindElements();\n\n\t\t//setup handlers\n\t\tsetupHandlers();\n\t};\n\n\t//start on dom ready (ie8+)\n\tdocument.addEventListener( 'DOMContentLoaded', function () {\n\t\ttweetInit();\n\t} );\n\n\treturn {\n\t\tgettweetBlocks() {\n\t\t\treturn tweetBlocks;\n\t\t},\n\t\tsettweetButtonText( str ) {\n\t\t\tsetButtonText( str );\n\t\t},\n\t};\n} )();\n","/**\n * BLOCK: collapsible-control\n *\n * A block to toggle collapsible blocks on the page\n */\n\n// Internal dependencies.\nimport bu_blocks from '../../blocks-frontend-tools';\n\nbu_blocks.collapsibleControl = ( function () {\n\t// Store all Control blocks\n\tconst collapsibleControlBlocks = [];\n\tconst allCollapsibleBlocks = [];\n\tlet allBlocksOpen = false;\n\tconst collapsibleOpenClass = 'is-open';\n\tconst collapsibleCloseClass = 'is-closed';\n\n\t/**\n\t * Open or close a group of collapsible blocks\n\t *\n\t * @param array             collapsible blocks\n\t * @param bool              true to open set of collapsible blocks, false to close\n\t * @param collapsibleBlocks\n\t * @param open\n\t */\n\tconst controlCollapsibleBlocks = function ( collapsibleBlocks, open ) {\n\t\tif ( open === undefined ) {\n\t\t\topen = true;\n\t\t}\n\n\t\tcollapsibleBlocks.forEach( function ( collapsible, i ) {\n\t\t\tconst container = collapsible.container;\n\t\t\tconst toggle = collapsible.toggle;\n\t\t\tconst panel = collapsible.panel;\n\n\t\t\tif ( open ) {\n\t\t\t\tcontainer.classList.add( collapsibleOpenClass );\n\t\t\t\tcontainer.classList.remove( collapsibleCloseClass );\n\t\t\t\ttoggle.setAttribute( 'aria-expanded', true );\n\t\t\t\tpanel.setAttribute( 'aria-hidden', false );\n\t\t\t} else {\n\t\t\t\tcontainer.classList.remove( collapsibleOpenClass );\n\t\t\t\tcontainer.classList.add( collapsibleCloseClass );\n\t\t\t\ttoggle.setAttribute( 'aria-expanded', false );\n\t\t\t\tpanel.setAttribute( 'aria-hidden', true );\n\t\t\t}\n\t\t} );\n\t};\n\n\t/**\n\t * Toggle all Collapsible blocks\n\t * @param control\n\t */\n\tconst toggleAll = function ( control ) {\n\t\tif ( 0 === allCollapsibleBlocks.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontrolCollapsibleBlocks( allCollapsibleBlocks, ! allBlocksOpen );\n\t\tallBlocksOpen = allBlocksOpen ? false : true;\n\t};\n\n\t/**\n\t * Toggle Collapsible blocks in control's group\n\t * @param control\n\t */\n\tconst toggleGroup = function ( control ) {\n\t\tconst groupIsOpen = control.groupIsOpen;\n\t\tconst collapsibleBlocks = control.collapsibleBlocks;\n\n\t\tcontrolCollapsibleBlocks( collapsibleBlocks, ! groupIsOpen );\n\t\tcontrol.groupIsOpen = groupIsOpen ? false : true;\n\t};\n\n\t/**\n\t * Find all Collapsible blocks on a page\n\t */\n\tconst findAllCollapsibleBlocks = function () {\n\t\tconst containers = document.querySelectorAll(\n\t\t\t'.js-wp-block-bu-collapsible'\n\t\t);\n\n\t\t// Don't coninue if no Collapsible blocks exist\n\t\tif ( containers.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainers.forEach( function ( element, i ) {\n\t\t\tconst block = {};\n\n\t\t\tblock.container = element;\n\t\t\tblock.toggle = element.querySelector(\n\t\t\t\t'.js-bu-block-collapsible-toggle'\n\t\t\t);\n\t\t\tblock.panel = element.querySelector(\n\t\t\t\t'.js-bu-block-collapsible-content'\n\t\t\t);\n\t\t\tallCollapsibleBlocks.push( block );\n\t\t} );\n\t};\n\n\t/**\n\t * Return all Collapsible blocks in the group with a Control\n\t *\n\t * @param object  control\n\t *\n\t * @param control\n\t * @return array list of all collapsible blocks in group\n\t */\n\tconst getGroupCollapsibleBlocks = function ( control ) {\n\t\tconst blocks = [];\n\t\tconst group = control.closest( '.wp-block-group' );\n\t\tif ( ! group ) {\n\t\t\treturn blocks;\n\t\t}\n\t\tconst containers = group.querySelectorAll(\n\t\t\t'.js-wp-block-bu-collapsible'\n\t\t);\n\n\t\tcontainers.forEach( function ( element, i ) {\n\t\t\tconst block = {};\n\n\t\t\tblock.container = element;\n\t\t\tblock.toggle = element.querySelector(\n\t\t\t\t'.js-bu-block-collapsible-toggle'\n\t\t\t);\n\t\t\tblock.panel = element.querySelector(\n\t\t\t\t'.js-bu-block-collapsible-content'\n\t\t\t);\n\t\t\tblocks.push( block );\n\t\t} );\n\n\t\treturn blocks;\n\t};\n\n\t/**\n\t * Find all Controls and Collapsible blocks\n\t */\n\tconst findElements = function () {\n\t\tconst controls = document.querySelectorAll(\n\t\t\t'.bu-collapsible-control-toggle'\n\t\t);\n\t\tlet allCollapsibleBlocksFound = false;\n\n\t\t// Don't coninue if no Controls are found\n\t\tif ( controls.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Store all controls\n\t\tcontrols.forEach( function ( control, i ) {\n\t\t\tconst block = {};\n\n\t\t\tblock.toggle = control;\n\n\t\t\t// Check if Control targets all blocks or blocks in its group\n\t\t\tif (\n\t\t\t\tcontrol.classList.contains(\n\t\t\t\t\t'js-bu-collapsible-control-target-group'\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tblock.targetGroup = true;\n\t\t\t\tblock.collapsibleBlocks = getGroupCollapsibleBlocks( control );\n\t\t\t\tblock.groupIsOpen = false;\n\t\t\t} else {\n\t\t\t\tblock.targetGroup = false;\n\n\t\t\t\tif ( ! allCollapsibleBlocksFound ) {\n\t\t\t\t\tfindAllCollapsibleBlocks();\n\t\t\t\t}\n\n\t\t\t\tallCollapsibleBlocksFound = true;\n\t\t\t}\n\n\t\t\tcollapsibleControlBlocks.push( block );\n\t\t} );\n\t};\n\n\t/**\n\t * Set up handlers, aria, and other functionality\n\t */\n\tconst setupCollapsibleControlBlocks = function () {\n\t\tif ( collapsibleControlBlocks.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcollapsibleControlBlocks.forEach( function ( control, i ) {\n\t\t\tconst toggle = control.toggle;\n\t\t\tconst targetGroup = control.targetGroup;\n\n\t\t\ttoggle.addEventListener( 'click', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif ( targetGroup ) {\n\t\t\t\t\ttoggleGroup( control );\n\t\t\t\t} else {\n\t\t\t\t\ttoggleAll( control );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t};\n\n\t/**\n\t * Init\n\t */\n\tconst collapsibleControlInit = function () {\n\t\tfindElements();\n\t\tsetupCollapsibleControlBlocks();\n\t};\n\n\t// Start things on dom ready.\n\tdocument.addEventListener( 'DOMContentLoaded', function () {\n\t\tcollapsibleControlInit();\n\t} );\n} )();\n","/**\n * BLOCK: Collapsible\n *\n * An accordian block to display content\n */\n\n// Internal dependencies.\nimport bu_blocks from '../../blocks-frontend-tools';\n\nbu_blocks.collapsible = ( function () {\n\t// Store all collapsible block\n\tconst collapsibleBlocks = [];\n\tconst collapsibleOpenClass = 'is-open';\n\tconst collapsibleClosedClass = 'is-closed';\n\tconst eventOpen = new CustomEvent( 'bu-blocks-collapsible-open' );\n\tconst eventClose = new CustomEvent( 'bu-blocks-collapsible-close' );\n\n\t/**\n\t * Check if a Collapsible block is set to open by default by user.\n\t *\n\t * @param object      collapsible block\n\t * @param collapsible\n\t * @return bool\n\t */\n\tconst isOpenDefault = function ( collapsible ) {\n\t\tconst container = collapsible.container;\n\n\t\tif ( 'true' === container.getAttribute( 'data-default-open' ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Check if a Collapsible block is open.\n\t *\n\t * @param object      collapsible block\n\t * @param collapsible\n\t * @return bool\n\t */\n\tconst isOpen = function ( collapsible ) {\n\t\tconst container = collapsible.container;\n\n\t\tif ( container.classList.contains( collapsibleOpenClass ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Open Collapsible block\n\t *\n\t * @param object      collapsible block\n\t * @param collapsible\n\t */\n\tconst openCollapsible = function ( collapsible ) {\n\t\tconst container = collapsible.container;\n\t\tconst toggle = collapsible.toggle;\n\t\tconst panel = collapsible.panel;\n\n\t\tcontainer.classList.add( collapsibleOpenClass );\n\t\tcontainer.classList.remove( collapsibleClosedClass );\n\n\t\ttoggle.setAttribute( 'aria-expanded', true );\n\t\tpanel.setAttribute( 'aria-hidden', false );\n\n\t\tif ( container.classList.contains( 'is-style-preview' ) ) {\n\t\t\ttoggle.innerHTML = toggle.getAttribute( 'data-close-text' );\n\t\t}\n\t\t//dispatch the event on the dom element\n\t\tcontainer.dispatchEvent( eventOpen );\n\t};\n\n\t/**\n\t * Close Collapsible block\n\t *\n\t * @param object      collapsible block\n\t * @param collapsible\n\t */\n\tconst closeCollapsible = function ( collapsible ) {\n\t\tconst container = collapsible.container;\n\t\tconst toggle = collapsible.toggle;\n\t\tconst panel = collapsible.panel;\n\n\t\tcontainer.classList.remove( collapsibleOpenClass );\n\t\tcontainer.classList.add( collapsibleClosedClass );\n\t\ttoggle.setAttribute( 'aria-expanded', false );\n\t\tpanel.setAttribute( 'aria-hidden', true );\n\n\t\tif ( container.classList.contains( 'is-style-preview' ) ) {\n\t\t\ttoggle.innerHTML = toggle.getAttribute( 'data-open-text' );\n\t\t}\n\t\t//dispatch the event on the dom element\n\t\tcontainer.dispatchEvent( eventClose );\n\t};\n\n\t/**\n\t * Toggle collapsible block\n\t *\n\t * @param element     collapsible block\n\t * @param collapsible\n\t */\n\tconst toggleCollapsible = function ( collapsible ) {\n\t\tif ( isOpen( collapsible ) ) {\n\t\t\tcloseCollapsible( collapsible );\n\t\t} else {\n\t\t\topenCollapsible( collapsible );\n\t\t}\n\t};\n\n\t/**\n\t * Find all Collapsible blocks\n\t */\n\tconst findElements = function () {\n\t\tconst containers = document.querySelectorAll(\n\t\t\t'.js-wp-block-bu-collapsible'\n\t\t);\n\n\t\t// Don't coninue if no Collapsible blocks exist\n\t\tif ( containers.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainers.forEach( function ( element, i ) {\n\t\t\tconst block = {};\n\n\t\t\tblock.container = element;\n\t\t\tblock.toggle = element.querySelector(\n\t\t\t\t'.js-bu-block-collapsible-toggle'\n\t\t\t);\n\t\t\tblock.panel = element.querySelector(\n\t\t\t\t'.js-bu-block-collapsible-content'\n\t\t\t);\n\t\t\tcollapsibleBlocks.push( block );\n\t\t} );\n\t};\n\n\t/**\n\t * Set up handlers, aria, and other functionality\n\t */\n\tconst setupCollapsibleBlocks = function () {\n\t\tif ( collapsibleBlocks.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcollapsibleBlocks.forEach( function ( collapsible, i ) {\n\t\t\tconst container = collapsible.container;\n\t\t\tconst toggle = collapsible.toggle;\n\t\t\tconst panel = collapsible.panel;\n\n\t\t\t// Add toggle event\n\t\t\ttoggle.addEventListener( 'click', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\ttoggleCollapsible( collapsible );\n\t\t\t} );\n\n\t\t\t// Set ARIA attributes\n\t\t\ttoggle.setAttribute( 'aria-controls', panel.id );\n\t\t\tpanel.setAttribute( 'aria-labelledby', toggle.id );\n\n\t\t\t// Setup initial state of each block.\n\t\t\tif ( isOpenDefault( collapsible ) ) {\n\t\t\t\topenCollapsible( collapsible );\n\t\t\t} else {\n\t\t\t\tcloseCollapsible( collapsible );\n\t\t\t}\n\n\t\t\tif ( isOpen( collapsible ) ) {\n\t\t\t\ttoggle.setAttribute( 'aria-expanded', true );\n\t\t\t\tpanel.setAttribute( 'aria-hidden', false );\n\t\t\t} else {\n\t\t\t\ttoggle.setAttribute( 'aria-expanded', false );\n\t\t\t\tpanel.setAttribute( 'aria-hidden', true );\n\t\t\t}\n\t\t} );\n\t};\n\n\t/**\n\t * Init\n\t */\n\tconst collapsibleInit = function () {\n\t\tfindElements();\n\t\tsetupCollapsibleBlocks();\n\t};\n\n\t// Start things on dom ready.\n\tdocument.addEventListener( 'DOMContentLoaded', function () {\n\t\tcollapsibleInit();\n\t} );\n\n\treturn {\n\t\tgetcollapsibleBlocks() {\n\t\t\treturn collapsibleBlocks;\n\t\t},\n\t\ttoggleCollapsible( collapsible ) {\n\t\t\tif ( collapsible ) {\n\t\t\t\ttoggleCollapsible( collapsible );\n\t\t\t}\n\t\t},\n\t};\n} )();\n","/**\n * BLOCK: Drawer\n *\n * A drawer block that provides a callout and expandable\n * content section that opens within the flow of the page.\n */\n\n// Internal dependencies.\nimport bu_blocks from '../../blocks-frontend-tools';\n\nbu_blocks.drawer = ( function () {\n\tconst drawerBlocks = []; //stores all of our found blocks\n\tconst $body = document.getElementsByTagName( 'body' )[ 0 ]; //target body tag\n\tconst eventOpen = new CustomEvent( 'bu-blocks-drawer-open' );\n\tconst eventClose = new CustomEvent( 'bu-blocks-drawer-close' );\n\n\tconst toggleDrawer = function ( drawer ) {\n\t\t// Using an if statement to check the class\n\t\tif ( drawer.classList.contains( 'show-drawer' ) ) {\n\t\t\tdrawer.classList.remove( 'show-drawer' );\n\t\t\t//dispatch the event on the drawer dom element\n\t\t\tdrawer.dispatchEvent( eventClose );\n\t\t} else {\n\t\t\tdrawer.classList.add( 'show-drawer' );\n\t\t\t//dispatch the event on the drawer dom element\n\t\t\tdrawer.dispatchEvent( eventOpen );\n\t\t}\n\t};\n\n\tconst findElements = function () {\n\t\t//find all the blocks\n\t\tconst elements = document.querySelectorAll( '.js-bu-block-drawer' );\n\t\t//if found\n\t\tif ( elements.length > 0 ) {\n\t\t\t//for each found block do stuff\n\t\t\tfor ( let i = 0; i < elements.length; i++ ) {\n\t\t\t\tconst block = {};\n\n\t\t\t\t//get first returned drawer content element\n\t\t\t\tblock.drawer = elements[ i ];\n\t\t\t\t//get all matched trigger btns\n\t\t\t\tblock.button = elements[ i ].querySelectorAll(\n\t\t\t\t\t'.js-bu-block-drawer-open'\n\t\t\t\t);\n\t\t\t\t//get first returned overlay element\n\t\t\t\tblock.close = elements[ i ].querySelector(\n\t\t\t\t\t'.js-bu-block-drawer-close'\n\t\t\t\t);\n\n\t\t\t\t//for each one found store as object in the array\n\t\t\t\tdrawerBlocks.push( block );\n\t\t\t}\n\t\t}\n\t};\n\n\tconst setupHandlers = function () {\n\t\tif ( drawerBlocks.length > 0 ) {\n\t\t\tdrawerBlocks.forEach( function ( thisDrawer, item ) {\n\t\t\t\t//some drawer blocks may have more than one trigger btn\n\t\t\t\t//so loop through all matched to setup events\n\t\t\t\tthisDrawer.button.forEach( function ( button, index ) {\n\t\t\t\t\t//for each btn we find, add an event handler\n\t\t\t\t\tbutton.addEventListener( 'click', function ( e ) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\ttoggleDrawer( thisDrawer.drawer );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\tthisDrawer.close.addEventListener( 'click', function ( e ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ttoggleDrawer( thisDrawer.drawer );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t};\n\n\tconst drawerInit = function () {\n\t\t//find the elements\n\t\tfindElements();\n\n\t\t//setup handlers\n\t\tsetupHandlers();\n\t};\n\n\t//start on dom ready (ie8+)\n\tdocument.addEventListener( 'DOMContentLoaded', function () {\n\t\tdrawerInit();\n\t} );\n\n\treturn {\n\t\tgetdrawerBlocks() {\n\t\t\treturn drawerBlocks;\n\t\t},\n\t\ttoggleDrawer( drawer ) {\n\t\t\tif ( drawer ) {\n\t\t\t\ttoggleDrawer( drawer );\n\t\t\t}\n\t\t},\n\t};\n} )();\n","/**\n * BLOCK: Modal\n *\n * A modal block that provides a callout and expandable\n * overlay content section that opens on top of the page content.\n */\n\n// Internal dependencies.\nimport bu_blocks from '../../blocks-frontend-tools';\n\nbu_blocks.modal = ( function () {\n\tconst modalBlocks = [];\n\tconst $body = document.getElementsByTagName( 'body' )[ 0 ];\n\tconst eventOpen = new CustomEvent( 'bu-blocks-modal-open' );\n\tconst eventClose = new CustomEvent( 'bu-blocks-modal-close' );\n\n\tconst lockScroll = function () {\n\t\t$body.classList.add( 'bu-blocks-modal-noscroll' );\n\t};\n\n\tconst unlockScroll = function () {\n\t\t$body.classList.remove( 'bu-blocks-modal-noscroll' );\n\t};\n\n\tconst toggleModal = function ( overlay ) {\n\t\t// Using an if statement to check the class\n\t\tif ( overlay.classList.contains( 'show-overlay' ) ) {\n\t\t\toverlay.classList.remove( 'show-overlay' );\n\t\t\t//dispatch the event on the overlay dom element\n\t\t\toverlay.dispatchEvent( eventClose );\n\t\t\tunlockScroll();\n\t\t} else {\n\t\t\toverlay.classList.add( 'show-overlay' );\n\t\t\t//dispatch the event on the overlay dom element\n\t\t\toverlay.dispatchEvent( eventOpen );\n\t\t\tlockScroll();\n\t\t}\n\t};\n\n\tconst findElements = function () {\n\t\t//find all the blocks\n\t\tconst elements = document.querySelectorAll( '.js-bu-block-modal' );\n\t\t//if found\n\t\tif ( elements.length > 0 ) {\n\t\t\t//for each found block do stuff\n\t\t\tfor ( let i = 0; i < elements.length; i++ ) {\n\t\t\t\tconst block = {};\n\n\t\t\t\t//get first returned overlay element\n\t\t\t\tblock.overlay = elements[ i ].querySelector(\n\t\t\t\t\t'.js-bu-block-modal-overlay'\n\t\t\t\t);\n\t\t\t\t//get all matched trigger btns\n\t\t\t\tblock.button = elements[ i ].querySelectorAll(\n\t\t\t\t\t'.js-bu-block-modal-trigger-overlay'\n\t\t\t\t);\n\t\t\t\t//get first returned overlay element\n\t\t\t\tblock.close = elements[ i ].querySelector(\n\t\t\t\t\t'.js-bu-block-modal-overlay-close'\n\t\t\t\t);\n\n\t\t\t\t//for each one found store as object in the array\n\t\t\t\tmodalBlocks.push( block );\n\t\t\t}\n\t\t}\n\t};\n\n\tconst setupHandlers = function () {\n\t\tif ( modalBlocks.length > 0 ) {\n\t\t\tmodalBlocks.forEach( function ( thisModal, item ) {\n\t\t\t\t//some modals may have more than one trigger btn\n\t\t\t\t//so loop through all matched to setup events\n\t\t\t\tthisModal.button.forEach( function ( button, index ) {\n\t\t\t\t\t//for each btn we find, add an event handler\n\t\t\t\t\tbutton.addEventListener( 'click', function ( e ) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\ttoggleModal( thisModal.overlay );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tthisModal.close.addEventListener( 'click', function ( e ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ttoggleModal( thisModal.overlay );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t};\n\n\tconst modalInit = function () {\n\t\t//find the elements\n\t\tfindElements();\n\n\t\t//setup handlers\n\t\tsetupHandlers();\n\t};\n\n\t//start on dom ready (ie8+)\n\tdocument.addEventListener( 'DOMContentLoaded', function () {\n\t\tmodalInit();\n\t} );\n\n\treturn {\n\t\tgetmodalBlocks() {\n\t\t\treturn modalBlocks;\n\t\t},\n\t\ttoggleModal( overlay ) {\n\t\t\tif ( overlay ) {\n\t\t\t\ttoggleModal( overlay );\n\t\t\t}\n\t\t},\n\t};\n} )();\n","/**\n * BLOCK: Photoessay\n *\n * A photo layout row block.\n */\n\n// Internal dependencies.\nimport bu_blocks from '../../blocks-frontend-tools';\n\nbu_blocks.photoessay = ( function () {\n\tlet scrollTop = 0;\n\tconst photoEssayBlocks = []; //stores all of our found blocks\n\tconst photoEssayGroups = [];\n\tlet photoEssayOverlay = false;\n\tconst photoEssayFigures = {};\n\tlet overlayActiveGroup = false;\n\tconst $html = document.getElementsByTagName( 'html' )[ 0 ]; //target html tag\n\tconst $body = document.getElementsByTagName( 'body' )[ 0 ]; //target body tag\n\n\t/*\n\t * Find all photo essay blocks\n\t * and store in an array.\n\t *\n\t * For each found get all of the DOM\n\t * elements we'll need\n\t *\n\t */\n\tconst findElements = function () {\n\t\t//find all the blocks\n\t\tconst findBlocks = document.querySelectorAll(\n\t\t\t'.js-block-editorial-photoessay'\n\t\t);\n\t\tconst elements = [].slice.call( findBlocks );\n\n\t\t//if found\n\t\tif ( elements.length > 0 ) {\n\t\t\t//for each found block do stuff\n\t\t\tfor ( let i = 0; i < elements.length; i++ ) {\n\t\t\t\tvar group = Array();\n\n\t\t\t\tconst block = {};\n\t\t\t\tblock.element = elements[ i ];\n\n\t\t\t\t//get first returned social photo block element\n\t\t\t\tgroup.push( block );\n\n\t\t\t\tconst siblings = getSiblings(\n\t\t\t\t\telements[ i ],\n\t\t\t\t\t'.js-block-editorial-photoessay'\n\t\t\t\t);\n\n\t\t\t\tif ( siblings.length > 0 ) {\n\t\t\t\t\t//add siblings to group.\n\t\t\t\t\tsiblings.forEach( function ( sibling, index ) {\n\t\t\t\t\t\tconst sib = {};\n\t\t\t\t\t\tsib.element = sibling;\n\t\t\t\t\t\tgroup.push( sib );\n\t\t\t\t\t} );\n\n\t\t\t\t\t//reduce elements array by removing the siblings\n\t\t\t\t\telements.splice( i, siblings.length );\n\t\t\t\t}\n\n\t\t\t\t//for each one found store as object in the array\n\t\t\t\tphotoEssayGroups.push( group );\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n\t * For Each Photo Essay Block Setup:\n\t *\n\t * Setup the Overlay Container DOM elements.\n\t *\n\t * Find each Figure inside each block inside each group and build\n\t * an array for each \"group\" with all of the figures in order so we\n\t * can later traverse.\n\t *\n\t * Then call setupHandlers() to setup\n\t * remaining event handlers for opening the overlay, etc.\n\t *\n\t */\n\tconst setupBlocks = function () {\n\t\tif ( photoEssayGroups.length > 0 ) {\n\t\t\tphotoEssayOverlay = {};\n\t\t\tphotoEssayOverlay.container = appendOverlay();\n\t\t\tphotoEssayOverlay.closeBtn =\n\t\t\t\tphotoEssayOverlay.container.querySelector(\n\t\t\t\t\t'.js-block-editorial-photoessay-overlay-close'\n\t\t\t\t);\n\t\t\tphotoEssayOverlay.prevBtn =\n\t\t\t\tphotoEssayOverlay.container.querySelector(\n\t\t\t\t\t'.js-block-editorial-photoessay-overlay-prev'\n\t\t\t\t);\n\t\t\tphotoEssayOverlay.nextBtn =\n\t\t\t\tphotoEssayOverlay.container.querySelector(\n\t\t\t\t\t'.js-block-editorial-photoessay-overlay-next'\n\t\t\t\t);\n\t\t\tphotoEssayOverlay.photoContainer =\n\t\t\t\tphotoEssayOverlay.container.querySelector(\n\t\t\t\t\t'.wp-block-editorial-photoessay-photocontainer'\n\t\t\t\t);\n\n\t\t\t// Foreach Group let's assign an id\n\t\t\t// and then traverse the blocks to find all of the\n\t\t\t// figure elements and push them into a global object.\n\t\t\tphotoEssayGroups.forEach( function ( group, index ) {\n\t\t\t\t// Create an id for each group.\n\t\t\t\tconst groupID = 'photoEssay_' + index;\n\n\t\t\t\t// Add an object with a key of the group id.\n\t\t\t\tphotoEssayFigures[ groupID ] = Array();\n\n\t\t\t\t//group.figures = Array();\n\t\t\t\t// Loop through each Group and iterate on the blocks.\n\t\t\t\tgroup.forEach( function ( block, item ) {\n\t\t\t\t\t// Find all of the Figure elements for the block as\n\t\t\t\t\t// each photoessay block can support multiple photos.\n\t\t\t\t\tblock.figures = block.element.querySelectorAll( 'figure' );\n\n\t\t\t\t\t// For each Figure element push it into the global object\n\t\t\t\t\t// under the key for that group.\n\t\t\t\t\tblock.figures.forEach( function ( figure, item ) {\n\t\t\t\t\t\tphotoEssayFigures[ groupID ].push( figure );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Setup this block.\n\t\t\tsetupHandlers();\n\t\t}\n\t};\n\n\t/*\n\t * Setup Handler for clicking on images/figure elements\n\t * and opening the overlay with the selected figure (image)\n\t * element.\n\t */\n\tconst openPhotoHandler = function ( figure, group ) {\n\t\t// setup click handler\n\t\tfigure.addEventListener( 'click', function ( e ) {\n\t\t\te.preventDefault();\n\n\t\t\t//Set as Active Group\n\t\t\toverlayActiveGroup = photoEssayFigures[ group ];\n\n\t\t\t// Add the selected figure to the overlay\n\t\t\toverlayAddContent( figure );\n\n\t\t\t// Open the Photo Overlay.\n\t\t\toverlayToggle();\n\t\t} );\n\t};\n\n\t/*\n\t * Setup remaining Handlers\n\t * for Progress Bar and Audio Complete Callbacks\n\t *\n\t * These use callbacks set in the global Audio API\n\t */\n\tvar setupHandlers = function () {\n\t\tfor ( group in photoEssayFigures ) {\n\t\t\tphotoEssayFigures[ group ].forEach( function ( figure, item ) {\n\t\t\t\topenPhotoHandler( figure, group );\n\t\t\t} );\n\t\t}\n\n\t\tphotoEssayOverlay.closeBtn.addEventListener( 'click', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\toverlayToggle();\n\t\t} );\n\n\t\tfunction nextSharedAction() {\n\t\t\tconst next = nextPhoto();\n\t\t\tremoveActiveFigure();\n\t\t\toverlayAddContent( overlayActiveGroup[ next ] );\n\t\t}\n\n\t\tphotoEssayOverlay.nextBtn.addEventListener( 'click', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\tnextSharedAction();\n\t\t} );\n\n\t\tfunction prevSharedAction() {\n\t\t\tconst prev = prevPhoto();\n\t\t\tremoveActiveFigure();\n\t\t\toverlayAddContent( overlayActiveGroup[ prev ] );\n\t\t}\n\n\t\tphotoEssayOverlay.prevBtn.addEventListener( 'click', function ( e ) {\n\t\t\te.preventDefault();\n\t\t\tprevSharedAction();\n\t\t} );\n\n\t\tdocument.onkeydown = checkKey;\n\n\t\tfunction checkKey( e ) {\n\t\t\te = e || window.event;\n\t\t\tif ( e.keyCode == '39' ) {\n\t\t\t\tnextSharedAction();\n\t\t\t} else if ( e.keyCode == '37' ) {\n\t\t\t\tprevSharedAction();\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n\t * Next Photo\n\t *\n\t * Find the next photo in the\n\t * currently active group if any exist.\n\t *\n\t * Return the index to that item in the array.\n\t */\n\tvar nextPhoto = function () {\n\t\tlet next = false;\n\t\tconst last = overlayActiveGroup.length - 1;\n\n\t\tconst current = overlayActiveGroup.findIndex( function ( element ) {\n\t\t\treturn element.classList.contains( 'active' );\n\t\t} );\n\n\t\tif ( current < last ) {\n\t\t\tnext = current + 1;\n\t\t} else if ( current === last ) {\n\t\t\tnext = 0;\n\t\t}\n\n\t\treturn next;\n\t};\n\n\t/*\n\t * Previous Photo\n\t *\n\t * Find the previous photo in the\n\t * currently active group if any exist.\n\t *\n\t * Return the index to that item in the array.\n\t */\n\tvar prevPhoto = function () {\n\t\tlet prev = false;\n\t\tconst last = overlayActiveGroup.length - 1;\n\n\t\tconst current = overlayActiveGroup.findIndex( function ( element ) {\n\t\t\treturn element.classList.contains( 'active' );\n\t\t} );\n\n\t\tif ( current > 0 ) {\n\t\t\tprev = current - 1;\n\t\t} else if ( current === 0 ) {\n\t\t\tprev = last;\n\t\t}\n\n\t\treturn prev;\n\t};\n\n\t/*\n\t * Open/Close Overlay\n\t *\n\t * Additionally sets up an event listener to\n\t * monitor scroll events when the overlay is open.\n\t */\n\tvar overlayToggle = function () {\n\t\tif ( $html.classList.contains( 'show-photo-essay-overlay' ) ) {\n\t\t\t// Closing: Remove event listener.\n\t\t\tdocument.removeEventListener( 'scroll', scrollEvent );\n\t\t} else {\n\t\t\t// Opening: Add Event Listener.\n\t\t\tdocument.addEventListener( 'scroll', scrollEvent );\n\n\t\t\t// Set current ScrollTop position.\n\t\t\tscrollTop = $html.scrollTop;\n\t\t}\n\n\t\t//Toggle the show-overlay class.\n\t\toverlayClass();\n\t};\n\n\t/*\n\t * Event Handler for scroll event\n\t *\n\t * Handles closing the overlay if the user\n\t * intends to scroll \"out\" of it and continue reading.\n\t *\n\t * Serves as an alternative to the close button.\n\t */\n\tvar scrollEvent = function ( e ) {\n\t\tif ( $html.scrollTop - scrollTop > 250 ) {\n\t\t\t//console.log(\"close\");\n\t\t\t// Reset scrollTop.\n\t\t\tscrollTop = 0;\n\n\t\t\t// Remove Event Listener until next overlay is open.\n\t\t\tdocument.removeEventListener( 'scroll', scrollEvent );\n\n\t\t\t// Close Overlay.\n\t\t\toverlayClass();\n\t\t}\n\t};\n\n\t/*\n\t * Toggle the \"show\" class for the overlay\n\t * element by toggling the class on the\n\t * HTML tag.\n\t */\n\tvar overlayClass = function () {\n\t\tif ( overlayActiveGroup.length > 1 ) {\n\t\t\t$html.classList.toggle( 'photo-essay-overlay-has-multiple' );\n\t\t}\n\t\t$html.classList.toggle( 'show-photo-essay-overlay' );\n\t};\n\n\t/*\n\t * Remove all \"active\" classes on any\n\t * figure element in the active group.\n\t */\n\tvar removeActiveFigure = function () {\n\t\tfor ( let i = 0; i < overlayActiveGroup.length; i++ ) {\n\t\t\tif ( overlayActiveGroup[ i ].matches( '.active' ) ) {\n\t\t\t\toverlayActiveGroup[ i ].classList.remove( 'active' );\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n\t * Add clone of image & caption figure\n\t * to the overlay component\n\t *\n\t * @param figure the figure to clone and add.\n\t */\n\tvar overlayAddContent = function ( figure ) {\n\t\tfigure.classList.add( 'active' );\n\n\t\t// Clone with child elements.\n\t\tconst newFigure = figure.cloneNode( true );\n\n\t\t// Clean anything that might exist.\n\t\tphotoEssayOverlay.photoContainer.innerHTML = '';\n\n\t\t// Append to overlay container.\n\t\tphotoEssayOverlay.photoContainer.appendChild( newFigure );\n\n\t\t//Wrap the img tag in a span for better styling.\n\t\twrapElement(\n\t\t\tphotoEssayOverlay.photoContainer.querySelector( 'img' ),\n\t\t\tdocument.createElement( 'span' )\n\t\t);\n\t};\n\n\t/*\n\t * Add Overlay to the body\n\t *\n\t */\n\tvar appendOverlay = function () {\n\t\tconst element = document.createElement( 'div' );\n\n\t\tconst html = overlayTemplate();\n\t\telement.innerHTML = html;\n\n\t\treturn $body.appendChild( element );\n\t};\n\n\t/*\n\t * Wrap an element in  some html:\n\t *\n\t * example: wrapElement(document.querySelector('a.wrap_me'), document.createElement('div'));\n\t *\n\t */\n\tvar wrapElement = function ( el, wrapper ) {\n\t\tel.parentNode.insertBefore( wrapper, el );\n\t\twrapper.appendChild( el );\n\t};\n\n\t/*\n\t * Generate the template for the\n\t * Overlay to display larger photos\n\t * in from each photoessay block.\n\t */\n\tvar overlayTemplate = function () {\n\t\tconst html = [\n\t\t\t'<div class=\"wp-block-editorial-photoessay-overlay\">',\n\t\t\t'<nav class=\"wp-block-editorial-photoessay-overlay-nav\">',\n\t\t\t'<button class=\"wp-block-editorial-photoessay-overlay-prev js-block-editorial-photoessay-overlay-prev\"><span>Previous</span></button>',\n\t\t\t'<button class=\"wp-block-editorial-photoessay-overlay-close js-block-editorial-photoessay-overlay-close\"><span>Close</span></button>',\n\t\t\t'<button class=\"wp-block-editorial-photoessay-overlay-next js-block-editorial-photoessay-overlay-next\"><span>Next</span></button>',\n\t\t\t'</nav>',\n\t\t\t'<div class=\"wp-block-editorial-photoessay-container\">',\n\t\t\t'<div class=\"wp-block-editorial-photoessay-photocontainer\">',\n\t\t\t'</div>',\n\t\t\t'</div>',\n\t\t\t'</div>',\n\t\t].join( '\\n' );\n\n\t\treturn html;\n\t};\n\n\t/*\n\t * Get Siblings of the passed element until\n\t * selector doesn't match.\n\t *\n\t * Returns Array of sibling elements.\n\t */\n\tvar getSiblings = function ( elem, selector ) {\n\t\t// Setup siblings array\n\t\tconst siblings = [];\n\n\t\t// Get the next sibling element\n\t\telem = elem.nextElementSibling;\n\n\t\t// As long as a sibling exists\n\t\twhile ( elem ) {\n\t\t\t// If selector doesn't match, bail\n\t\t\tif ( ! elem.matches( selector ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Otherwise, push it to the siblings array\n\t\t\tsiblings.push( elem );\n\n\t\t\t// Get the next sibling element\n\t\t\telem = elem.nextElementSibling;\n\t\t}\n\n\t\treturn siblings;\n\t};\n\n\tconst init = function () {\n\t\t//find the elements\n\t\tfindElements();\n\n\t\t//setup blocks\n\t\tsetupBlocks();\n\t};\n\n\t//start on dom ready (ie8+)\n\tdocument.addEventListener( 'DOMContentLoaded', function () {\n\t\tinit();\n\t} );\n\n\treturn {\n\t\tgetBlocks() {\n\t\t\treturn photoEssayBlocks;\n\t\t},\n\t\tgetActiveGroup() {\n\t\t\treturn overlayActiveGroup;\n\t\t},\n\t};\n} )();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Frontend JS for BU Blocks\n *\n */\n\nimport './blocks-frontend-polyfills';\n\n// Import the bu_blocks object that all data and public functions are stored on.\nimport bu_blocks from './blocks-frontend-tools';\n\n// Import the frontend JS for each block so it is enqueued together into one file.\nimport './blocks/clicktotweet/frontend';\nimport './blocks/collapsible/frontend';\nimport './blocks/collapsible-control/frontend';\nimport './blocks/drawer/frontend';\nimport './blocks/modal/frontend';\nimport './blocks/photoessay/frontend';\n\n// Export bu_blocks object to the window so it's accessible easily for\n// child themes to call public functions or debug.\nwindow.bu_blocks = bu_blocks;\n"],"names":["window","CustomEvent","event","params","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","prototype","Event","Element","matches","msMatchesSelector","webkitMatchesSelector","Array","findIndex","Object","defineProperty","value","predicate","TypeError","o","len","length","thisArg","arguments","k","kValue","call","configurable","writable","closest","s","el","parentElement","parentNode","nodeType","NodeList","forEach","console","info","callback","i","T","O","self","createElement","createElementNS","view","classListProp","protoProp","elemCtrProto","objCtr","strTrim","String","trim","replace","arrIndexOf","indexOf","item","DOMEx","type","message","name","code","DOMException","checkTokenAndGetIndex","classList","token","test","ClassList","elem","trimmedClasses","getAttribute","classes","split","push","_updateClassName","setAttribute","toString","classListProto","classListGetter","Error","contains","add","tokens","l","updated","remove","index","splice","toggle","force","result","method","join","classListPropDesc","get","enumerable","ex","number","undefined","__defineGetter__","testElement","createMethod","original","DOMTokenList","_toggle","bu_blocks","clicktotweet","tweetBlocks","tweetLabel","findElements","elements","querySelectorAll","theBlock","block","element","highlight","querySelector","tweet_text","innerText","setupHandlers","btn","appendChild","createTextNode","addEventListener","e","preventDefault","openTweet","text","tweetedLink","location","href","open","setButtonText","str","tweetInit","gettweetBlocks","settweetButtonText","collapsibleControl","collapsibleControlBlocks","allCollapsibleBlocks","allBlocksOpen","collapsibleOpenClass","collapsibleCloseClass","controlCollapsibleBlocks","collapsibleBlocks","collapsible","container","panel","toggleAll","control","toggleGroup","groupIsOpen","findAllCollapsibleBlocks","containers","getGroupCollapsibleBlocks","blocks","group","controls","allCollapsibleBlocksFound","targetGroup","setupCollapsibleControlBlocks","collapsibleControlInit","collapsibleClosedClass","eventOpen","eventClose","isOpenDefault","isOpen","openCollapsible","innerHTML","dispatchEvent","closeCollapsible","toggleCollapsible","setupCollapsibleBlocks","id","collapsibleInit","getcollapsibleBlocks","drawer","drawerBlocks","$body","getElementsByTagName","toggleDrawer","button","close","thisDrawer","drawerInit","getdrawerBlocks","modal","modalBlocks","lockScroll","unlockScroll","toggleModal","overlay","thisModal","modalInit","getmodalBlocks","photoessay","scrollTop","photoEssayBlocks","photoEssayGroups","photoEssayOverlay","photoEssayFigures","overlayActiveGroup","$html","findBlocks","slice","siblings","getSiblings","sibling","sib","setupBlocks","appendOverlay","closeBtn","prevBtn","nextBtn","photoContainer","groupID","figures","figure","openPhotoHandler","overlayAddContent","overlayToggle","nextSharedAction","next","nextPhoto","removeActiveFigure","prevSharedAction","prev","prevPhoto","onkeydown","checkKey","keyCode","last","current","removeEventListener","scrollEvent","overlayClass","newFigure","cloneNode","wrapElement","html","overlayTemplate","wrapper","insertBefore","selector","nextElementSibling","init","getBlocks","getActiveGroup"],"sourceRoot":""}